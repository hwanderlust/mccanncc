{"version":3,"sources":["components/Tile/TileTitle.js","components/Tile/TileDetails.js","components/Tile/TilePic.js","components/Tile/Tile.js","components/Favorites.js"],"names":["TileTitle","memo","_ref","title","url","react_default","a","createElement","href","target","rel","className","TileDetails","tile","concat","author","creation","score","TilePic","picture","handleOnload","handleOnError","description","src","onLoad","alt","onError","error","console","log","render","Tile","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","toggleFavClass","iconClass","favIcon","current","state","fav","slice","length","toggleFav","_this$context","context","handleFavoriting","handleUnfavoriting","setState","prevState","id","handleKeyPress","e","key","loaded","thumbnail","four04","document","parent","parentElement","remove","appendChild","handleTouch","previousState","persist","touched","timeStamp","passPictureDown","React","createRef","_this$props","style","Fragment","onTouchStartCapture","onDoubleClick","tabIndex","Tile_TilePic","Tile_TileTitle","Tile_TileDetails","ref","onClick","onKeyPress","PureComponent","contextType","StoreConsumer","Favorites","favs","getFavorites","JSON","parse","localStorage","getItem","renderFavTiles","map","react__WEBPACK_IMPORTED_MODULE_5___default","_Tile_Tile__WEBPACK_IMPORTED_MODULE_7__","_ErrorMsg__WEBPACK_IMPORTED_MODULE_8__","msg","_this2","_this3","_contexts__WEBPACK_IMPORTED_MODULE_6__","ctx","favorites","Component"],"mappings":"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","file":"static/js/1.4dbd335d.chunk.js","sourcesContent":["import React, { memo } from 'react';\r\n\r\nconst TileTitle = memo(({ title, url }) => {\r\n\r\n  return (\r\n    <a href={url} target='_blank' rel=\"noopener noreferrer\" className='pic-title'>\r\n      <h3>{title}</h3>\r\n    </a>\r\n  )\r\n});\r\n\r\nexport default TileTitle;\r\n","import React, { memo } from 'react'\r\n\r\nconst TileDetails = memo(({ tile }) => {\r\n\r\n  return (\r\n    <figcaption className='pic-details'>\r\n      <span><i className='fas fa-user'></i>{` ${tile.author}`}</span>\r\n      <span><i className='far fa-clock'></i>{` ${tile.creation}`}</span>\r\n      <span><i className='fas fa-bolt'></i>{` ${tile.score}`}</span>\r\n    </figcaption>\r\n  )\r\n})\r\n\r\nexport default TileDetails;","import React, { memo } from 'react';\r\n\r\n\r\nconst TilePic = memo(({ picture, author, title, handleOnload, handleOnError, description }) => {\r\n\r\n  const render = () => {\r\n    try {\r\n      return <img className='tile-pic' src={picture} onLoad={handleOnload} alt={`${title} by ${author}`} onError={handleOnError} />\r\n\r\n    } catch (error) {\r\n      console.log(error)\r\n      return\r\n    }\r\n  }\r\n  \r\n  \r\n  return (\r\n    <figure className='pic-container'>\r\n\r\n      {\r\n        !description ? \r\n\r\n        render() \r\n        \r\n        : <p className='tile-desc'>{description}</p>\r\n      }\r\n    \r\n    </figure>\r\n  )\r\n});\r\n\r\nexport default TilePic;","import React, { PureComponent } from 'react'\r\nimport { StoreConsumer } from \"../../contexts\";\r\nimport TileTitle from './TileTitle';\r\nimport TileDetails from './TileDetails';\r\nimport TilePic from './TilePic';\r\n\r\nclass Tile extends PureComponent {\r\n  \r\n  // new addition with 16.6 allowing access to context outside of render\r\n  static contextType = StoreConsumer;\r\n  \r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      fav: false,\r\n      loaded: false,\r\n      touched: 0,\r\n      timeStamp: 0,\r\n    }\r\n\r\n    this.favIcon = React.createRef()\r\n  };\r\n\r\n  componentDidMount() {\r\n    if(this.props.fav) {\r\n\r\n      this.favIcon.current.className += ` red`;\r\n\r\n      this.setState({\r\n        fav: true\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    console.log(`UNMOUNT`)\r\n  }\r\n\r\n  // CSS classes\r\n  toggleFavClass = () => {\r\n\r\n    const iconClass = this.favIcon.current.className;\r\n\r\n    if(this.state.fav) {\r\n      this.favIcon.current.className = iconClass.slice(0, iconClass.length - 4);\r\n      \r\n    } else {\r\n      this.favIcon.current.className += ` red`;\r\n    }\r\n  }\r\n  \r\n  // each Tile instance keeps track of its own state and the inside fn are from the Context\r\n  toggleFav = () => {\r\n    const { handleFavoriting, handleUnfavoriting } = this.context\r\n    const { tile } = this.props \r\n\r\n    this.toggleFavClass()\r\n\r\n    this.setState(prevState => {\r\n      \r\n      if(prevState.fav) {\r\n        handleUnfavoriting(tile.id)\r\n        \r\n      } else {\r\n        handleFavoriting(tile)\r\n      }\r\n      \r\n      return {\r\n        fav: !prevState.fav\r\n      }\r\n    }, () => {\r\n      console.log(this.state)\r\n    })\r\n  }\r\n\r\n  // accessibility via keyboard\r\n  handleKeyPress = (e) => {\r\n\r\n    if(e.key === 'Enter') {\r\n      this.toggleFav()\r\n    }\r\n  }\r\n\r\n  // pass down higher res pic after thumbnail was loaded for lower bandwiths \r\n  handleOnload = () => {\r\n\r\n    // don't try to change the pic if a thumbnail exists and a higher res pic doesn't\r\n    if(!this.props.tile.picture) {\r\n      return\r\n    }\r\n\r\n    this.setState({\r\n      loaded: true\r\n    })\r\n  }\r\n\r\n  handleOnError = (e) => {\r\n\r\n    // rather see the thumbnail than a 404 img due to CORS\r\n    if(this.props.tile.thumbnail) {\r\n      e.target.src = this.props.tile.thumbnail\r\n      return\r\n    }\r\n\r\n    const four04 = document.createElement('img')\r\n    four04.src = \"http://i.imgur.com/lqHeX.jpg\"\r\n\r\n    const parent = e.target.parentElement\r\n    e.target.remove()\r\n    parent.appendChild(four04)\r\n    return \r\n  }\r\n  \r\n  \r\n  // for mobiles and tablets - the double tapping for toggle fav-ing something\r\n  handleTouch = (e) => {\r\n    e.persist()\r\n    let previousState;\r\n\r\n    this.setState(prevState => {\r\n      previousState = prevState;\r\n\r\n      return {\r\n        touched: prevState.touched < 2 ? ++prevState.touched : 1,\r\n        timeStamp: e.timeStamp\r\n      }\r\n    \r\n    }, () => {\r\n\r\n      if(this.state.touched === 2 && this.state.timeStamp - previousState.timeStamp <= 1000) {\r\n        this.toggleFav()\r\n      } \r\n    })\r\n  }\r\n\r\n  passPictureDown = () => {\r\n    \r\n    if(this.state.loaded) {\r\n      return this.props.tile.picture\r\n    }\r\n\r\n    return this.props.tile.thumbnail\r\n  }\r\n  \r\n  \r\n\r\n  render() {\r\n    const { tile, style } = this.props \r\n    \r\n    return (\r\n      <React.Fragment>\r\n        <div className='tile-wrapper' onTouchStartCapture={this.handleTouch}>\r\n          <div className=\"tile-container\" style={style} onDoubleClick={this.toggleFav} tabIndex='0' >\r\n\r\n            <TilePic \r\n              picture={this.passPictureDown()} \r\n              title={tile.title} \r\n              author={tile.author} \r\n              description={tile.description}\r\n              handleOnload={this.handleOnload}\r\n              handleOnError={this.handleOnError} \r\n            />\r\n            \r\n            <TileTitle title={tile.title} url={tile.url} />\r\n            <TileDetails tile={tile} />\r\n          \r\n          </div>\r\n\r\n          <i ref={this.favIcon} className=\"fab fa-gratipay fav-icon\" onClick={this.toggleFav} onKeyPress={this.handleKeyPress} tabIndex='0'/>\r\n        \r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Tile","import React from 'react';\r\nimport { StoreConsumer } from '../contexts';\r\nimport Tile from './Tile/Tile';\r\nimport ErrorMsg from './ErrorMsg';\r\n\r\nclass Favorites extends React.Component {\r\n\r\n  static contextType = StoreConsumer;\r\n  \r\n  state = {\r\n    favs: null\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    this.setState({\r\n      favs: this.getFavorites()\r\n    }, () => console.log(this.state))\r\n  }\r\n\r\n  getFavorites = () => {\r\n\r\n    return JSON.parse(localStorage.getItem('favs'))\r\n  }\r\n  \r\n\r\n  renderFavTiles = (favs) => {\r\n\r\n    if (favs && favs.length) {\r\n      return favs.map(fav => <Tile key={fav.id} tile={fav} fav={true}/>)\r\n    }\r\n\r\n    return <ErrorMsg msg=\"Whoops! I think you've got to favorite some things first :D\" />\r\n  }\r\n  \r\n\r\n  render() {\r\n\r\n    return (\r\n\r\n      <main className='tile-area'>\r\n        <StoreConsumer>\r\n          {ctx => {\r\n            // console.log(ctx)\r\n            return (\r\n              <>\r\n                {this.renderFavTiles(ctx.favorites)}\r\n              </>\r\n            )\r\n          }}\r\n        </StoreConsumer>\r\n      </main>\r\n\r\n      // can't bc it doesn't update when ctx changes--when you unfav something\r\n      // <main className='tile-area'>\r\n      //   { this.renderFavTiles() }\r\n      // </main>\r\n    )\r\n  }\r\n};\r\n\r\nexport default Favorites;"],"sourceRoot":""}